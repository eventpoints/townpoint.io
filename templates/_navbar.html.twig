<nav class="navbar navbar-expand bg-light mb-3">
    <div class="container">
        <a class="navbar-brand" href="{{ path('register_step_one') }}">
            <img src="{{ asset('/images/townpoint-logo.png') }}" height="40">
        </a>
        {% if app.user %}
            <div class="w-50">
                <turbo-frame src="{{ path('search') }}" class="w-100" id="search-form-frame" target="_top">
                    <div class="d-flex justify-content-center">
                        <div class="spinner-border" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </turbo-frame>
            </div>
        {% endif %}
        <ul class="navbar-nav ml-auto align-items-center mb-2 mb-lg-0">
            {% if not app.user %}
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="{{ path('app_login') }}">
                        {{ 'login'|trans }}
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="{{ path('register_step_one') }}">
                        {{ 'register'|trans }}
                    </a>
                </li>
            {% endif %}
            <li class="nav-item">
                <a class="nav-link" aria-current="page" href="#" data-bs-toggle="offcanvas"
                   data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
                    <span class="mdi mdi-menu fs-3"></span>
                </a>
            </li>
        </ul>
    </div>
</nav>


<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
    <div class="offcanvas-header text-end">
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>

    <div class="offcanvas-body">
        <div class="row justify-content-end align-items-end g-2">
            {% if app.user %}
                <div class="col-12">
                    <turbo-frame id="user-account-qr-frame" target="_self">
                        <div class="mb-2 position-relative">
                            <div class="text-end">
                                <a class="btn btn-outline-secondary" href="{{ path('user_account_qr') }}">
                                    <span class="mdi mdi-qrcode fs-3"></span>
                                </a>
                            </div>
                            <div class="text-center">
                                <img src="{{ app.user.avatar }}" class="img-fluid rounded-circle w-50"/>
                            </div>
                        </div>
                    </turbo-frame>
                </div>
                <div class="col-6">
                    <a href="{{ path('dashboard') }}"
                       class="btn btn-outline-primary {{ app.request.attributes.get('_route') == 'dashboard' ? 'active' }} d-flex justify-content-between align-items-center"
                       aria-current="true">
                        <div class="fw-bold">{{ 'dashboard'|trans|capitalize }}</div>
                        <div class="mdi mdi-format-list-text fs-3"></div>
                    </a>
                </div>
                <div class="col-6">
                    <a href="{{ path('profile', {id: app.user.id}) }}"
                       class="btn btn-outline-primary d-flex justify-content-between align-items-center {{ app.request.attributes.get('_route') == 'profile' ? 'active' }}"
                       aria-current="true">
                        <div class="fw-bold">{{ app.user.fullName|capitalize }}</div>
                        <div class="mdi mdi-account-circle-outline fs-3"></div>
                    </a>
                </div>
                <div class="col-6">
                    <a href="{{ path('auction_index') }}"
                       class="btn btn-outline-primary d-flex justify-content-between align-items-center {{ app.request.attributes.get('_route') == 'auction_index' ? 'active' }}"
                       aria-current="true">
                        <div class="fw-bold">{{ 'auction'|trans|capitalize }}</div>
                        <div class="mdi mdi-gavel fs-3"></div>
                    </a>
                </div>
                <div class="col-6">
                    <a href="{{ path('groups') }}"
                       class="btn btn-outline-primary d-flex justify-content-between align-items-center {{ app.request.attributes.get('_route') == 'groups' ? 'active' }}"
                       aria-current="true">
                        <div class="fw-bold">{{ 'groups'|trans|capitalize }}</div>
                        <div class="mdi mdi-account-group-outline fs-3"></div>
                    </a>
                </div>
                <div class="col-6">
                    <a href="{{ path('events') }}"
                       class="btn btn-outline-primary d-flex justify-content-between align-items-center {{ app.request.attributes.get('_route') == 'events' ? 'active' }}"
                       aria-current="true">
                        <div class="fw-bold">{{ 'events'|trans|capitalize }}</div>
                        <div class="mdi mdi-calendar fs-3"></div>
                    </a>
                </div>
                <div class="col-6">
                    <a href="{{ path('conversations') }}"
                       class="btn btn-outline-primary d-flex justify-content-between align-items-center {{ app.request.attributes.get('_route') == 'conversations' ? 'active' }}"
                       aria-current="true">
                        <div class="fw-bold">{{ 'conversations'|trans|capitalize }}</div>
                        <div class="mdi mdi-message-outline fs-3"></div>
                    </a>
                </div>
                <div class="col-6">
                    <a href="{{ path('listeners') }}"
                       class="btn btn-outline-primary d-flex justify-content-between align-items-center {{ app.request.attributes.get('_route') == 'listeners' ? 'active' }}"
                       aria-current="true">
                        <div class="fw-bold">{{ 'listeners'|trans|capitalize }}</div>
                        <div class="mdi mdi-ear-hearing fs-3"></div>
                    </a>
                </div>
                <div class="col-6">
                    <a href="{{ path('account') }}"
                       class="btn btn-outline-primary d-flex justify-content-between align-items-center {{ app.request.attributes.get('_route') == 'account' ? 'active' }}"
                       aria-current="true">
                        <div class="fw-bold">{{ 'account'|trans|capitalize }}</div>
                        <div class="mdi mdi-bank-outline fs-3"></div>
                    </a>
                </div>
                <div class="col-6">
                    <a href="{{ path('app_logout') }}"
                       class="btn btn-outline-danger d-flex justify-content-between align-items-center"
                       aria-current="true">
                        <div class="fw-bold">{{ 'logout'|trans|capitalize }}</div>
                        <div class="mdi mdi-logout-variant fs-3"></div>
                    </a>
                </div>
            {% else %}
                <div class="col-6">
                    <a href="{{ path('register_step_one') }}"
                       class="btn btn-outline-primary d-flex justify-content-between align-items-center {{ app.request.attributes.get('_route') == 'app_register' ? 'active' }}"
                       aria-current="true">
                        <div class="fw-bold">{{ 'register'|trans|capitalize }}</div>
                        <div class="mdi mdi-account-plus-outline fs-3"></div>
                    </a>
                </div>
                <div class="col-6">
                    <a href="{{ path('app_login') }}"
                       class="btn btn-outline-primary d-flex justify-content-between align-items-center {{ app.request.attributes.get('_route') == 'app_login' ? 'active' }}"
                       aria-current="true">
                        <div class="fw-bold">{{ 'app_login'|trans|capitalize }}</div>
                        <div class="mdi mdi-logout-variant fs-3"></div>
                    </a>
                </div>
            {% endif %}
        </div>

    </div>
</div>
